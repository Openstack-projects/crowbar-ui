.upgrade-nodes-page
    h2(translate='') upgrade.steps.upgrade-nodes.title
    p(ng-if="!upgradeNodesVm.nodesUpgrade.startAtComputeUpgrade", translate='') upgrade.steps.upgrade-nodes.description
    p(ng-if="upgradeNodesVm.nodesUpgrade.startAtComputeUpgrade", translate='') upgrade.steps.upgrade-nodes.alt-description

    input.upgrade-option(type='checkbox' name='upgrade-compute'
        ng-model='upgradeNodesVm.nodesUpgrade.upgradeComputeSelected'
        ng-change='upgradeNodesVm.nodesUpgrade.toggleComputeUpgrade()'
        ng-disabled='upgradeNodesVm.nodesUpgrade.upgradedNodes === upgradeNodesVm.nodesUpgrade.totalNodes')
    span(translate='') upgrade.steps.upgrade-nodes.upgrade-option

    button.btn.btn-success.center-block(
        ng-click="upgradeNodesVm.nodesUpgrade.beginUpgradeNodes()",
        ng-disabled="upgradeNodesVm.nodesUpgrade.running || " +
        "(upgradeNodesVm.nodesUpgrade.completed && upgradeNodesVm.nodesUpgrade.upgradedNodes === upgradeNodesVm.nodesUpgrade.totalNodes) || " +
        "(upgradeNodesVm.nodesUpgrade.completed && upgradeNodesVm.nodesUpgrade.upgradedNodes < upgradeNodesVm.nodesUpgrade.totalNodes && !upgradeNodesVm.nodesUpgrade.upgradeComputeSelected)",
        ng-class="{\
            'spinner-visible': upgradeNodesVm.nodesUpgrade.spinnerVisible,\
            active: upgradeNodesVm.nodesUpgrade.running\
        }",
    )
        suse-lazy-spinner(delay="2000", active="upgradeNodesVm.nodesUpgrade.running",
            visible="upgradeNodesVm.nodesUpgrade.spinnerVisible")
        span(translate='') upgrade.steps.upgrade-nodes.form.upgrade-nodes

    uib-progressbar(ng-if="upgradeNodesVm.nodesUpgrade.totalNodes > 0", max="upgradeNodesVm.nodesUpgrade.totalNodes" value="upgradeNodesVm.nodesUpgrade.upgradedNodes")
        .progress-label.text-center(translate='upgrade.steps.upgrade-nodes.status.progress-bar',
            translate-values='{current: upgradeNodesVm.nodesUpgrade.upgradedNodes, total: upgradeNodesVm.nodesUpgrade.totalNodes}'
        )

    .row.upgrade-progress(ng-if="upgradeNodesVm.nodesUpgrade.currentNodes.length === 1")
        .col-md-8.col-md-offset-4(
            title='{{upgradeNodesVm.nodesUpgrade.currentNodes[0].ip}}',
            translate='upgrade.steps.upgrade-nodes.status.current-node',
            translate-values='upgradeNodesVm.nodesUpgrade.currentNodes[0]'
        )
    .row.upgrade-progress(ng-if="upgradeNodesVm.nodesUpgrade.currentNodes.length > 1")
        .col-md-8.col-md-offset-4(translate='') upgrade.steps.upgrade-nodes.status.current-nodes
        .col-md-8.col-md-offset-4(ng-if="upgradeNodesVm.nodesUpgrade.currentNodes.length > 1",
        ng-repeat="currentNode in upgradeNodesVm.nodesUpgrade.currentNodes | limitTo:upgradeNodesVm.nodesUpgrade.maxDisplayNodes")
            .multi-node-line(
                title='{{currentNode.ip}}',
                translate='upgrade.steps.upgrade-nodes.status.multi-nodes-line',
                translate-values='currentNode'
            )
        .col-md-8.col-md-offset-4(ng-if="upgradeNodesVm.nodesUpgrade.currentNodes.length > upgradeNodesVm.nodesUpgrade.maxDisplayNodes")
            .multi-node-line(
                translate='upgrade.steps.upgrade-nodes.status.more-line',
                translate-values='{"totalCount": upgradeNodesVm.nodesUpgrade.currentNodes.length,\
                    "moreCount": upgradeNodesVm.nodesUpgrade.currentNodes.length - upgradeNodesVm.nodesUpgrade.maxDisplayNodes\
                }'
            )
    .row.upgrade-progress(ng-if="upgradeNodesVm.nodesUpgrade.currentNodes.length > 0")
        .col-md-8.col-md-offset-4(
            translate='upgrade.steps.upgrade-nodes.status.node-role',
            translate-values='upgradeNodesVm.nodesUpgrade.currentNodes[0]'
        )
    .row.upgrade-progress(ng-if="upgradeNodesVm.nodesUpgrade.currentAction && upgradeNodesVm.nodesUpgrade.currentNodes.length > 0")
        .col-md-8.col-md-offset-4(
            translate='upgrade.steps.upgrade-nodes.status.current-action',
            translate-values='{"action": upgradeNodesVm.nodesUpgrade.currentAction}'
        )

    .step-hint(ng-if="upgradeNodesVm.nodesUpgrade.completed && upgradeNodesVm.nodesUpgrade.upgradedNodes === upgradeNodesVm.nodesUpgrade.totalNodes", translate='') upgrade.steps.upgrade-nodes.finished
    .step-hint(ng-if="upgradeNodesVm.nodesUpgrade.startAtComputeUpgrade && upgradeNodesVm.nodesUpgrade.upgradedNodes < upgradeNodesVm.nodesUpgrade.totalNodes && !upgradeNodesVm.nodesUpgrade.running", translate='') upgrade.steps.upgrade-nodes.resume
    .step-hint(ng-if="!upgradeNodesVm.nodesUpgrade.startAtComputeUpgrade && upgradeNodesVm.nodesUpgrade.upgradeComputePostponed", translate='') upgrade.steps.upgrade-nodes.partially-upgraded

suse-modal(error="upgradeNodesVm.nodesUpgrade.errors", translation-prefix="upgrade.errors")
